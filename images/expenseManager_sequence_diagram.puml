@startuml
actor Duke
participant ExpenseManager
participant ExpenseParser
participant Expense
participant ExchangeRateManager

Duke -> ExpenseManager: provides expense details
activate ExpenseManager
ExpenseManager -> ExpenseManager: execute()
activate ExpenseManager
ExpenseManager -> ExpenseManager: extractExpenseFields(details)
ExpenseManager -> ExpenseParser: parseExpense(expenseFields)
activate ExpenseParser
opt isOtherCurrency()
ExpenseParser -> ExchangeRateManager : convertCurrency()
ExchangeRateManager -> ExpenseParser : amount
end
ExpenseParser -> ExpenseParser: parseDate(dateField)
ExpenseParser -> Expense: Expense(description, date, amount, type)
Expense --> ExpenseParser
ExpenseParser --> ExpenseManager
deactivate ExpenseParser
deactivate ExpenseManager
ExpenseManager --> Duke: returns new Expense object
deactivate ExpenseManager
@enduml